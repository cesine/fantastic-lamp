"use strict";(self.webpackChunkgame=self.webpackChunkgame||[]).push([[437],{"./src/components/stats/EmigratePanel.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EmigratePanel_stories});var react=__webpack_require__("./node_modules/react/index.js");function DocumentDuplicateIcon({title,titleId,...props},svgRef){return react.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:svgRef,"aria-labelledby":titleId},props),title?react.createElement("title",{id:titleId},title):null,react.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}let ForwardRef=react.forwardRef(DocumentDuplicateIcon),fallbackCopyTextToClipboard=text=>{var textArea=document.createElement("textarea");textArea.value=text,textArea.style.top="0",textArea.style.left="0",textArea.style.position="fixed",document.body.appendChild(textArea),textArea.focus(),textArea.select();try{document.execCommand("copy")}catch(err){console.error("Fallback: Oops, unable to copy",err)}document.body.removeChild(textArea)},copyTextToClipboard=text=>{if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return}navigator.clipboard.writeText(text)};var encryption=__webpack_require__("./src/lib/encryption.ts"),localStorage1=__webpack_require__("./src/lib/localStorage.ts");let defaultStats={winDistribution:Array.from(Array(__webpack_require__("./src/constants/settings.ts").EG),()=>0),gamesFailed:0,currentStreak:0,bestStreak:0,totalGames:0,successRate:0},loadStats=()=>(0,localStorage1.cT)()||defaultStats;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");let EmigratePanel=()=>{let[isCopyButtonEnabled,setIsCopyButtonEnabled]=(0,react.useState)(!0),[copyButtonText,setCopyButtonText]=(0,react.useState)("Copy"),stats=loadStats(),gameState=(0,localStorage1.vK)(!0),emigrationCode=(0,encryption.H)(JSON.stringify({statistics:stats,gameState:gameState}));return(0,jsx_runtime.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:[(0,jsx_runtime.jsx)("label",{htmlFor:"message",className:"mb-2 block text-left text-sm font-medium text-gray-900 dark:text-gray-400",children:"Copy your migration code:"}),(0,jsx_runtime.jsx)("textarea",{id:"emigration-code",readOnly:!0,rows:8,className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",value:emigrationCode}),(0,jsx_runtime.jsxs)("button",{disabled:!isCopyButtonEnabled,onClick:()=>{window.gtag("event","unlock_achievement",{achievement_id:"exported_stats"}),copyTextToClipboard(emigrationCode),setCopyButtonText("Copied!"),setIsCopyButtonEnabled(!1)},type:"button",className:"mt-2 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-left text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:border-gray-200 disabled:bg-white disabled:text-gray-900 disabled:focus:outline-none disabled:dark:border-gray-600 disabled:dark:bg-gray-800 disabled:dark:text-gray-400 sm:text-sm",children:[isCopyButtonEnabled&&(0,jsx_runtime.jsx)(ForwardRef,{className:"mr-2 h-6 w-6 cursor-pointer dark:stroke-white"}),copyButtonText]})]})};EmigratePanel.displayName="EmigratePanel";let EmigratePanel_stories={title:"EmigratePanel",component:EmigratePanel},Default=()=>(0,jsx_runtime.jsx)(EmigratePanel,{});Default.displayName="Default";let __namedExportsOrder=["Default"]},"./src/constants/settings.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EG:()=>MAX_CHALLENGES,XZ:()=>BLOWFISH_IV,hu:()=>REVEAL_TIME_MS,iG:()=>BLOWFISH_KEY,rd:()=>ENABLE_ARCHIVED_GAMES,tH:()=>ENABLE_MIGRATE_STATS,vE:()=>DATE_LOCALE});var date_fns_locale__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/locale/en-US.mjs");let MAX_CHALLENGES=10,REVEAL_TIME_MS=350,ENABLE_MIGRATE_STATS=!0,BLOWFISH_KEY="xcQUAHsik#Thq&LG*8es2DsZ$3bw^e",BLOWFISH_IV="#45XmF^w",ENABLE_ARCHIVED_GAMES=!0,DATE_LOCALE=date_fns_locale__WEBPACK_IMPORTED_MODULE_0__._},"./src/lib/encryption.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>encrypt,p:()=>decrypt});var egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/egoroof-blowfish/dist/blowfish.js"),egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0__),_constants_settings__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/settings.ts");let bf=new(egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0___default())(_constants_settings__WEBPACK_IMPORTED_MODULE_1__.iG,egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0___default().MODE.ECB,egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0___default().PADDING.NULL);bf.setIv(_constants_settings__WEBPACK_IMPORTED_MODULE_1__.XZ);let encrypt=data=>btoa(bf.encode(data).reduce((data,byte)=>data+String.fromCharCode(byte),"")),decrypt=encoded=>{try{return bf.decode(Uint8Array.from(atob(encoded),c=>c.charCodeAt(0)),egoroof_blowfish__WEBPACK_IMPORTED_MODULE_0___default().TYPE.STRING)}catch(error){return null}}},"./src/lib/localStorage.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$F:()=>saveGameStateToLocalStorage,IS:()=>getStoredIsHighContrastMode,WD:()=>saveStatsToLocalStorage,cT:()=>loadStatsFromLocalStorage,vK:()=>loadGameStateFromLocalStorage});let gameStateKey="gameState",archiveGameStateKey="archiveGameState",saveGameStateToLocalStorage=(isLatestGame,gameState)=>{localStorage.setItem(isLatestGame?gameStateKey:archiveGameStateKey,JSON.stringify(gameState))},loadGameStateFromLocalStorage=isLatestGame=>{let state=localStorage.getItem(isLatestGame?gameStateKey:archiveGameStateKey);return state?JSON.parse(state):null},gameStatKey="gameStats",saveStatsToLocalStorage=gameStats=>{localStorage.setItem(gameStatKey,JSON.stringify(gameStats))},firstGame=!0,loadStatsFromLocalStorage=()=>{let stats=localStorage.getItem(gameStatKey);return!stats&&firstGame&&(firstGame=!1,window.gtag("event","sign_up",{method:"Anonymous"})),stats?JSON.parse(stats):null},getStoredIsHighContrastMode=()=>"1"===localStorage.getItem("highContrast")}}]);