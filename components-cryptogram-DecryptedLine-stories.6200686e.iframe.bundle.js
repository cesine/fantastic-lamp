"use strict";(self.webpackChunkgame=self.webpackChunkgame||[]).push([[298],{"./src/components/cryptogram/DecryptedLine.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithLongGuess:()=>WithLongGuess,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DecryptedLine_stories}),__webpack_require__("./node_modules/react/index.js");var quotes=__webpack_require__("./src/lib/quotes.ts"),Cell=__webpack_require__("./src/components/cryptogram/Cell.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");let onClick=(input,ariaLabel)=>{alert("You clicked on ".concat(ariaLabel))},DecryptedLine=_ref=>{let{guess,className}=_ref,splitGuess=(0,quotes.C2)(guess),emptyCells=Array.from(Array(quotes.DV.length-splitGuess.length));return(0,jsx_runtime.jsxs)("div",{className:"flex justify-center mb-1 ".concat(className),children:[splitGuess.map((letter,i)=>(0,jsx_runtime.jsx)(Cell.b,{onClick:onClick,encryptedValue:guess,decryptedValue:letter},i)),emptyCells.map((_,i)=>(0,jsx_runtime.jsx)(Cell.b,{onClick:onClick,encryptedValue:""},i))]})},DecryptedLine_stories={title:"DecryptedLine",component:DecryptedLine},Default=()=>(0,jsx_runtime.jsx)(DecryptedLine,{guess:"guess",className:"example-class"}),WithLongGuess=()=>(0,jsx_runtime.jsx)(DecryptedLine,{guess:"longer guess",className:"example-class"}),__namedExportsOrder=["Default","WithLongGuess"]},"./src/components/cryptogram/Cell.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>Cell});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_constants_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/constants/settings.ts"),_lib_localStorage__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/localStorage.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");let isaLetter=decryptedValue=>/[a-zA-Z]+/.test(decryptedValue),userHasInteractedWithCell=!1,Cell=_ref=>{let{encryptedValue,decryptedValue,status,isRevealing,isCompleted,onClick,position=0}=_ref,animationDelay="".concat(position*_constants_settings__WEBPACK_IMPORTED_MODULE_2__.hu,"ms"),isHighContrast=(0,_lib_localStorage__WEBPACK_IMPORTED_MODULE_4__.IS)(),shouldDisplayDecrypted=isaLetter(encryptedValue),classesEncrypted=classnames__WEBPACK_IMPORTED_MODULE_0___default()("xxshort:w-4 xxshort:h-4 short:text-2xl short:w-6 short:h-6 w-8 h-8 flex items-center justify-center mx-0.5 text-4xl font-thin rounded dark:text-white",{"bg-white dark:bg-slate-900":!status}),classesDecrypted=classnames__WEBPACK_IMPORTED_MODULE_0___default()("xxshort:w-4 xxshort:h-4 short:text-2xl short:w-6 short:h-6 w-8 h-8 border-solid border-2 flex items-center justify-center mx-0.5 text-4xl font-thin rounded dark:text-white",{"hover:bg-slate-300 active:bg-slate-400 dark:border-slate-700":!status,"absent shadowed bg-slate-400 dark:bg-slate-700 text-white border-slate-400 dark:border-slate-700":"absent"===status,"correct shadowed bg-orange-500 hover:bg-orange-600 active:bg-orange-700 text-white border-orange-500":"correct"===status&&isHighContrast,"present shadowed bg-cyan-500 hover:bg-cyan-600 active:bg-cyan-700 text-white border-cyan-500":"present"===status&&isHighContrast,"correct shadowed bg-green-500 hover:bg-green-600 active:bg-green-700 text-white border-green-500":"correct"===status&&!isHighContrast,"present shadowed bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white border-yellow-500":"present"===status&&!isHighContrast,"cell-fill-animation":decryptedValue&&!isCompleted,"cell-reveal":isRevealing&&isCompleted}),stylesDecrypted={fontFamily:"Courier New",animationDelay,minHeight:"1em"},stylesEncrypted={...stylesDecrypted,marginBottom:"40px"},hiddenInputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.createRef)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"inline-flex flex-col",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{"aria-label":encryptedValue,onClick:event=>{var _event$target,_hiddenInputRef$curre;userHasInteractedWithCell||(userHasInteractedWithCell=!0,window.gtag("event","unlock_achievement",{achievement_id:"click_cryptogram_cell"})),onClick("",(null==event?void 0:null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.ariaLabel)||""),event.currentTarget.blur(),null==hiddenInputRef||null===(_hiddenInputRef$curre=hiddenInputRef.current)||void 0===_hiddenInputRef$curre||_hiddenInputRef$curre.focus()},className:shouldDisplayDecrypted?classesDecrypted:classesEncrypted,style:stylesDecrypted,children:[shouldDisplayDecrypted?decryptedValue:null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{ref:hiddenInputRef,style:{position:"absolute",top:"-9999px"},type:"text"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{"aria-label":encryptedValue,style:stylesEncrypted,className:classesEncrypted,children:encryptedValue})]})}},"./src/constants/settings.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EG:()=>MAX_CHALLENGES,XZ:()=>BLOWFISH_IV,hu:()=>REVEAL_TIME_MS,iG:()=>BLOWFISH_KEY,rd:()=>ENABLE_ARCHIVED_GAMES,tH:()=>ENABLE_MIGRATE_STATS,vE:()=>DATE_LOCALE});var date_fns_locale__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/locale/en-US.mjs");let MAX_CHALLENGES=26,REVEAL_TIME_MS=350,ENABLE_MIGRATE_STATS=!0,BLOWFISH_KEY="xcQUAHsik#Thq&LG*8es2DsZ$3bw^e",BLOWFISH_IV="#45XmF^w",ENABLE_ARCHIVED_GAMES=!0,DATE_LOCALE=date_fns_locale__WEBPACK_IMPORTED_MODULE_0__._},"./src/lib/dateutils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>getYesterday,x:()=>getToday});var date_fns__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/startOfToday.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/startOfYesterday.mjs");let getToday=()=>(0,date_fns__WEBPACK_IMPORTED_MODULE_0__.I)(),getYesterday=()=>(0,date_fns__WEBPACK_IMPORTED_MODULE_1__.Y)()},"./src/lib/localStorage.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$F:()=>saveGameStateToLocalStorage,IS:()=>getStoredIsHighContrastMode,WD:()=>saveStatsToLocalStorage,cT:()=>loadStatsFromLocalStorage,vK:()=>loadGameStateFromLocalStorage});let gameStateKey="gameState",archiveGameStateKey="archiveGameState",saveGameStateToLocalStorage=(isLatestGame,gameState)=>{localStorage.setItem(isLatestGame?gameStateKey:archiveGameStateKey,JSON.stringify(gameState))},loadGameStateFromLocalStorage=isLatestGame=>{let state=localStorage.getItem(isLatestGame?gameStateKey:archiveGameStateKey);return state?JSON.parse(state):null},gameStatKey="gameStats",saveStatsToLocalStorage=gameStats=>{localStorage.setItem(gameStatKey,JSON.stringify(gameStats))},firstGame=!0,loadStatsFromLocalStorage=()=>{let stats=localStorage.getItem(gameStatKey);return!stats&&firstGame&&(firstGame=!1,window.gtag("event","sign_up",{method:"Anonymous"})),stats?JSON.parse(stats):null},getStoredIsHighContrastMode=()=>"1"===localStorage.getItem("highContrast")},"./src/lib/quotes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hm:()=>firstGameDate,Ek:()=>getLastGameDate,NV:()=>getQuoteOfDay,ij:()=>isValidGameDate,yw:()=>message,oM:()=>periodInDays,DV:()=>solution,qm:()=>solutionGameDate,Ds:()=>solutionIndex,Ro:()=>tomorrow,C2:()=>quotes_unicodeSplit});var startOfDay=__webpack_require__("./node_modules/date-fns/startOfDay.mjs"),differenceInDays=__webpack_require__("./node_modules/date-fns/differenceInDays.mjs"),addDays=__webpack_require__("./node_modules/date-fns/addDays.mjs"),parseISO=__webpack_require__("./node_modules/date-fns/parseISO.mjs"),formatISO=__webpack_require__("./node_modules/date-fns/formatISO.mjs"),grapheme_splitter=__webpack_require__("./node_modules/grapheme-splitter/index.js"),grapheme_splitter_default=__webpack_require__.n(grapheme_splitter),query_string=__webpack_require__("./node_modules/query-string/index.js");let quotelist_QUOTES=['"Surround yourself with only people who are going to lift you higher." Oprah Winfrey','"It\'s the friends you can call up at 4 a.m. that matter." Marlene Dietrich','"I always felt that the great high, privilege, relief, and comfort of friendship was that one had to explain nothing." Katherine Mansfield','"There\'s nothing like a really loyal, dependable, good friend. Nothing."  Jennifer Aniston',"\"It's not that diamonds are a girl's best friend, but it's your best friends who are diamonds.\" Gina Barreca",'"Many people will walk in and out of your life, but only true friends will leave footprints in your heart." Eleanor Roosevelt','"True friends are families which you can select." Audrey Hepburn','"Each friend represents a world in us, a world possibly not born until they arrive, and it is only by this meeting that a new world is born." Anais Nin','"A friend is someone you want to be around when you feel like being alone." Barbara Burrow','"True friends are like diamonds â€” bright, beautiful, valuable, and always in style." Nicole Richie'];var dateutils=__webpack_require__("./src/lib/dateutils.ts");let firstGameDate=new Date(2022,0),periodInDays=1,quotes_unicodeSplit=quote=>new(grapheme_splitter_default())().splitGraphemes(quote),localeAwareUpperCase=text=>text.toUpperCase(),getLastGameDate=today=>{let t=(0,startOfDay.b)(today),daysSinceLastGame=(0,differenceInDays.j)(firstGameDate,t)%periodInDays;return(0,addDays.E)(t,-daysSinceLastGame)},getNextGameDate=today=>(0,addDays.E)(getLastGameDate(today),periodInDays),isValidGameDate=date=>!(date<firstGameDate||date>(0,dateutils.x)())&&(0,differenceInDays.j)(firstGameDate,date)%periodInDays==0,getIndex=gameDate=>{let start=firstGameDate,index=-1;do index++,start=(0,addDays.E)(start,periodInDays);while(start<=gameDate)return index},getQuoteOfDay=index=>{if(index<0)throw Error("Invalid index");return localeAwareUpperCase(quotelist_QUOTES[index%quotelist_QUOTES.length])},setGameDate=d=>{let path=window.location.pathname;try{if(d<(0,dateutils.x)()){window.location.href="".concat(path,"?d=").concat((0,formatISO.c)(d,{representation:"date"}));return}}catch(e){console.log(e)}window.location.href=path},getIsLatestGame=()=>{let parsed=query_string.parse(window.location.search);return null===parsed||!("d"in parsed)},emptyGame={guesses:[],index:1,solution:""},loadGameStateFromQueryParam=queryParams=>{try{let code=queryParams.get("code"),stateString=code?atob(code):"{}",state=stateString?JSON.parse(stateString):emptyGame;return state.solution&&(console.log("Loaded a game from query params",state),window.gtag("event","unlock_achievement",{achievement_id:"open_shared_encrypted_message"})),state}catch(err){console.warn("Error laoding game from query params, ignoring it",err)}return emptyGame},{message,solution,solutionGameDate,solutionIndex,solutionName,tomorrow}=(gameDate=>{let gameFromQueryParams=loadGameStateFromQueryParam(new URLSearchParams(window.location.search)),nextGameDate=getNextGameDate(gameDate),index=gameFromQueryParams.index?gameFromQueryParams.index:getIndex(gameDate),quoteOfTheDay=gameFromQueryParams.solution?gameFromQueryParams.solution:getQuoteOfDay(index),solutionName="".concat(index," ").concat(quoteOfTheDay).slice(0,50);return window.gtag("event","level_start",{level_name:"Cryptogram ".concat(solutionName)}),{message:gameFromQueryParams.message?gameFromQueryParams.message:"",solution:quoteOfTheDay,solutionGameDate:gameDate,solutionIndex:index,solutionName,tomorrow:nextGameDate.valueOf()}})((()=>{if(getIsLatestGame())return(0,dateutils.x)();let parsed=query_string.parse(window.location.search);try{let d=(0,startOfDay.b)((0,parseISO.D)(parsed.d.toString()));return(d>=(0,dateutils.x)()||d<firstGameDate)&&setGameDate((0,dateutils.x)()),d}catch(e){return console.log(e),(0,dateutils.x)()}})())}}]);